---
title: ปรับปรุงลำดับกระบวนการทางธุรกิจด้วยการแบ่งสาขาด้วย PowerApps | MicrosoftDocs
description: เรียนรู้วิธีการแบ่งสาขาในลำดับกระบวนการทางธุรกิจ
ms.custom: ''
ms.date: 06/27/2018
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
author: Mattp123
ms.assetid: 62cfac6b-0d78-48de-9364-0287454aa2a0
caps.latest.revision: 9
ms.author: matp
manager: kvivek
search.app:
- Flow
search.audienceType:
- flowmaker
- enduser
ms.openlocfilehash: a7e1dc8d366ac9f23682362c8a673eb67df65975
ms.sourcegitcommit: a20fbed9941f0cd8b69dc579277a30da9c8bb31b
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 09/12/2018
ms.locfileid: "44690525"
---
# <a name="tutorial-enhance-business-process-flows-with-branching"></a>บทช่วยสอน: ปรับปรุงลำดับกระบวนการทางธุรกิจด้วยการแบ่งสาขา

ลำดับกระบวนการทางธุรกิจให้คำแนะนำแก่คุณผ่านขั้นตอนต่าง ๆ ของการขาย การตลาด หรือกระบวนการบริการจนเสร็จสมบูรณ์ ในกรณีอย่างง่าย การไหลของลำดับกระบวนการทางธุรกิจเชิงเส้นเป็นตัวเลือกที่ดี อย่างไรก็ตามในสถานการณ์ที่ซับซ้อนมากขึ้น คุณสามารถเพิ่มลำดับกระบวนการทางธุรกิจได้ด้วยการแบ่งสาขา หากคุณมีสิทธิ์ในการสร้างลำดับกระบวนการทางธุรกิจ คุณจะสามารถสร้างลำดับกระบวนการทางธุรกิจได้หลายสาขาโดยใช้ตรรกะ `If-Else` คุณสามารถสร้างเงื่อนไขการแบ่งสาขาจากนิพจน์เชิงตรรกะหลายตัวที่ใช้การรวมกันของตัวดำเนินการ `AND` หรือ `OR` การเลือกสาขาจะดำเนินการโดยอัตโนมัติในแบบเรียลไทม์ตามกฎที่กำหนดไว้ในระหว่างการกำหนดกระบวนการ ตัวอย่างเช่น ในการขายรถยนต์ คุณสามารถกำหนดค่าลำดับกระบวนการทางธุรกิจเดียว ซึ่งหลังจากลำดับขั้นการรับรองคุณสมบัติทั่วไปแยกออกเป็นสองสาขาบนพื้นฐานของกฎ (ลูกค้าชอบรถยนต์คันใหม่หรือรถยนต์ที่เคยมีเจ้าของมากกว่า งบประมาณของพวกเขาสูงกว่าหรือต่ำกว่า 20,000 เหรียญ และอื่น ๆ สาขาหนึ่ง สำหรับขายรถยนต์ใหม่และอีกสาขาหนึ่ง สำหรับจำหน่ายรถยนต์ที่เคยมีเจ้าของแล้ว สำหรับข้อมูลเพิ่มเติมเกี่ยวกับลำดับกระบวนการทางธุรกิจ ดูที่ [ภาพรวมลำดับกระบวนการทางธุรกิจ](business-process-flows-overview.md)  
  
 แผนภาพต่อไปนี้แสดงลำดับกระบวนการทางธุรกิจกับสาขา  
  
 ![ผังงานที่แสดงขั้นตอนในกระบวนการขายรถยนต์](media/example-car-sales-flow-chart.png "ผังงานที่แสดงขั้นตอนในกระบวนการขายรถยนต์")  
  
<a name="Points"></a>   
## <a name="what-you-need-to-know-when-designing-business-process-flows-with-branches"></a>สิ่งที่คุณจำเป็นต้องรู้เมื่อออกแบบลำดับกระบวนการทางธุรกิจกับสาขา  
 โปรดสังเกตข้อมูลต่อไปนี้เมื่อคุณออกแบบลำดับกระบวนการทางธุรกิจกับสาขา:  
  
-   กระบวนการสามารถครอบคลุมเอนทิตีที่ไม่ซ้ำกันสูงสุด 5 เอนทิตี  
  
-   คุณสามารถใช้ลำดับขั้นได้สูงสุด 30 ลำดับต่อกระบวนการ และสามารถใช้ขั้นตอนได้สูงสุด 30 ขั้นต่อลำดับขั้น  
  
-   สาขาแต่ละแห่งจะมีความลึกไม่เกิน 5 ระดับ  
  
-   กฎการแบ่งสาขาต้องขึ้นอยู่กับขั้นตอนในลำดับขั้นที่มีมาก่อน  
  
-   คุณสามารถรวมหลายเงื่อนไขในกฎได้โดยใช้ตัวดำเนินการ `AND` หรือตัวดำเนินการ `OR` แต่ไม่ใช้ตัวดำเนินการพร้อมกันทั้งคู่  
  
-   เมื่อคุณกำหนดลำดับกระบวนการ คุณสามารถเลือกความสัมพันธ์เอนทิตีได้ ความสัมพันธ์นี้ต้องเป็นความสัมพันธ์เอนทิตีแบบ 1: n (หนึ่งต่อกลุ่ม)  
  
-   คุณสามารถเรียกใช้กระบวนการที่ใช้งานมากกว่าหนึ่งกระบวนการพร้อมกันบนระเบียนข้อมูลเดียวกันได้  
  
-   คุณสามารถจัดเรียงไทล์ (ลำดับขั้น ขั้นตอน เงื่อนไขและอื่น ๆ) บนลำดับกระบวนการได้โดยการลาก แล้วปล่อย  
  
-   เมื่อรวมสาขา ทุกสาขาเพียร์ต้องผสานรวมเป็นหนึ่งลำดับขั้น สาขาเพียร์ต้องรวมลำดับขั้นทั้งหมดเป็นลำดับขั้นเดียว หรือสาขาเพียร์แต่ละสาขาต้องทำให้กระบวนการสิ้นสุด คุณไม่สามารถผสานรวมสาขาเพียร์กับสาขาอื่น และ ที่จุดสิ้นสุดกระบวนการในเวลาเดียวกันได้  
  
> [!NOTE]
> - คุณสามารถกลับมาเยี่ยมชมเอนทิตีที่ใช้ในกระบวนการได้หลายครั้ง (ลูปเอนทิตีแบบปิดหลายลูป)  
> - กระบวนการสามารถกลับไปยังลำดับขั้นก่อนหน้าได้โดยไม่คำนึงถึงชนิดเอนทิตี ตัวอย่างเช่น หากลำดับขั้นที่ใช้งานอยู่คือ **ส่งมอบใบเสนอราคา** ในบันทึกใบเสนอราคา ผู้ใช้กระบวนการสามารถย้ายลำดับขั้นที่ใช้งานกลับไปยัง **ข้อเสนอ** ในการระเบียนโอกาส  
>   
>   ในอีกกรณีหนึ่ง สมมติว่ากระบวนการอยู่ในลำดับขั้น **ข้อเสนอปัจจุบัน** ในลำดับกระบวนการของคุณ: **ลูกค้าเป้าหมายที่มีแนวโน้มจะซื้อผลิตภัณฑ์** > **ระบุความต้องการที่จะ** > **สร้างข้อเสนอ** > **เสนอข้อเสนอ** > **ปิด** หากข้อเสนอที่เสนอต่อลูกค้าต้องการการวิจัยเพิ่มเติมเพื่อระบุความต้องการของลูกค้า ผู้ใช้สามารถเลือกลำดับขั้น **ระบุความต้องการ** ของกระบวนการของคุณและเลือก **ตั้งค่าที่ใช้งาน**  
  
<a name="CarSelling365"></a>   
## <a name="dynamics-365-customer-engagement-example-car-selling-process-flow-with-two-branches"></a>ตัวอย่าง Dynamics 365 customer engagement: ลำดับกระบวนการขายรถยนต์ที่มีทั้งสองสาขา
 
ลองดูตัวอย่างลำดับกระบวนการทางธุรกิจที่มีสองสาขาเพื่อขายรถยนต์ใหม่และรถยนต์ที่เคยมีเจ้าของแล้ว  
  
 ขั้นแรกเราจะสร้างกระบวนการใหม่ที่ชื่อ **กระบวนการขายรถยนต์**  
  
1.  [เปิดตัวสำรวจโซลูชัน](/powerapps/maker/model-driven-apps/advanced-navigation#solution-explorer) จากนั้นในบานหน้าต่างนำทางด้านซ้ายเลือก **กระบวนการ**  
  
2.  เลือก **ใหม่** เพื่อสร้างกระบวนการใหม่  
  
3.  ระบุ **หมวดหมู่** เป็น **ลำดับกระบวนการทางธุรกิจ** และสำหรับ **เอนทิตี้** หลัก เลือก **ลูกค้าเป้าหมาย**  
  
4.  เพิ่มลำดับขั้นลำดับแรกในกระบวนการที่เรียกว่า **การรับรองคุณสมบัติ** และเพิ่มขั้นตอน **กรอบเวลาซื้อ** และ **รายละเอียดคุณลักษณะรถยนต์**  
  
5.  หลังจากผ่านลำดับขั้น **การรับรองคุณสมบัติ** ทั่วไปแล้ว เราแบ่งกระบวนการออกเป็น 2 สาขาโดยใช้ไทล์ **เงื่อนไข**  
  
    1.  กำหนดค่าไทล์เงื่อนไขด้วยกฎที่ตรงกับความต้องการทางธุรกิจของคุณ  
  
    2.  เมื่อต้องเพิ่มสาขาแรกสำหรับลำดับขั้น ให้เพิ่มไทล์ลำดับขั้นบนเส้นทาง "Yes" ของไทล์เงื่อนไข  
  
    3.  เมื่อต้องการเพิ่มสาขาที่สองที่จะทำงานเมื่อไม่เป็นไปตามเงื่อนไข ให้เพิ่มไทล์ลำดับขั้นอีกอันหนึ่งในเส้นทาง "No" ของไทล์เงื่อนไข  
  
> [!TIP]
>  คุณสามารถเพิ่มเงื่อนไขอื่นในเส้นทาง "ไม่" ของไทล์เงื่อนไขที่มีอยู่เพื่อสร้างการแบ่งสาขาที่ซับซ้อนมากขึ้น  
  
 ![รูปแสดงลำดับขั้นการรับรองคุณสมบัติที่สร้างขึ้น](media/example-car-sales-qualify-stage.JPG "รูปแสดงลำดับขั้นการรับรองคุณสมบัติที่สร้างขึ้น")  
  
 หาก **รายละเอียดคุณลักษณะรถยนต์** = **ใหม่** กระบวนการจะแยกหัวข้อเป็นลำดับขั้น **การขายรถยนต์ใหม่** หรือมิฉะนั้นจะข้ามไปที่ลำดับขั้น **การขายรถยนต์ที่เคยมีเจ้าของแล้ว** ในสาขาที่สอง ดังที่แสดงด้านล่าง  
  
 ![รูปแสดงลำดับขั้นการขายรถยนต์](media/example-car-sales-new-stage-1.JPG "รูปแสดงลำดับขั้นการขายรถยนต์")  
  
 ![ลำดับขั้นการขายรถยนต์ที่เคยมีเจ้าของแล้ว](media/example-car-sales-pre-owned-stage.JPG "ลำดับขั้นการขายรถยนต์ที่เคยมีเจ้าของแล้ว")  
  
 หลังจากดำเนินการตามขั้นตอนทั้งหมดในลำดับขั้น **การขายรถใหม่** หรือลำดับขั้น **การขายรถยนต์ที่เคยมีเจ้าของแล้ว** กระบวนกรจะส่งกลับไปที่ลำดับงานหลักด้วยลำดับขั้น **ส่งมอบใบเสนอราคา**  
  
 ![ลำดับขั้นส่งมอบใบเสนอราคา](media/example-car-sales-deliver-quote-stage.JPG "ลำดับขั้นส่งมอบใบเสนอราคา")  
  
<a name="PreventInformation"></a>   
## <a name="prevent-information-disclosure"></a>ป้องกันการเปิดเผยข้อมูล  
 พิจารณาลำดับงานของกระบวนการทางธุรกิจกับสาขาเพื่อดำเนินการขอกู้เงินที่ธนาคาร ดังที่แสดงด้านล่าง เอนทิตีแบบกำหนดเองที่ใช้ในลำดับขั้นจะแสดงในวงเล็บ  
  
 ![ผังงานที่แสดงขั้นตอนในกระบวนการตัวอย่างเพื่อป้องกันการเปิดเผยข้อมูล](media/example-car-sales-flow-chart-process-prevent-information-disclosure.png "แผนผังแสดงขั้นตอนในกระบวนการตัวอย่างเพื่อป้องกันการเปิดเผยข้อมูล")  
  
 ในสถานการณ์สมมตินี้ เจ้าหน้าที่สินเชื่อของธนาคารจำเป็นต้องเข้าถึงระเบียนคำขอ แต่เธอไม่ควรมองเห็นลำดับขั้นการตรวจสอบคำขอดังกล่าว ดูว่าเราสามารถทำสิ่งนี้ได้โดยมอบหมายให้เจ้าหน้าที่สินเชื่อมีบทบาทด้านความปลอดภัยที่ระบุว่าจะไม่สามารถเข้าถึงเอนทิตีการตรวจสอบได้ แต่ให้ดูตัวอย่างในรายละเอียดเพิ่มเติมและดูว่านี่เป็นจริงหรือไม่  
  
 สมมุติว่าลูกค้าขอกู้เงินเกินกว่า 60,000 เหรียญ กับธนาคาร เจ้าหน้าที่สินเชื่อพิจารณาคำขอในขั้นตอนแรก ถ้ากฎการแบ่งสาขาที่ตรวจสอบว่าจำนวนเงินที่ค้างชำระกับธนาคารเกินกว่า 50,000 ดอลลาร์ มีความเหมาะสม ลำดับขั้นถัดไปในกระบวนการนี้คือการตรวจสอบว่าคำขอดังกล่าวฉ้อโกงหรือไม่ หากพิจารณาแล้วว่านี่เป็นกรณีที่เป็นการฉ้อโกง กระบวนการนี้จะดำเนินการตามกฎหมายต่อผู้ร้องขอ เจ้าหน้าที่สินเชื่อไม่ควรมองเห็นลำดับขั้นการตรวจสอบทั้งสองเนื่องจากไม่สามารถเข้าถึงเอนทิตีการตรวจสอบได้  
  
 อย่างไรก็ตาม ถ้าเจ้าหน้าที่กู้เปิดเรกคอร์ดขอ เธอจะสามารถดูขั้นตอนครอบคลุมทั้งหมดแบบครบวงจรได้ ไม่เพียงเธอจะสามารถดูลำดับขั้นการตรวจสอบการฉ้อฉลเท่านั้น แต่เธอจะยังสามารถระบุผลลัพธ์ของการตรวจสอบ โดยเธอสามารถมองเห็นลำดับขั้นการดำเนินการทางกฎหมายในกระบวนการได้ นอกจากนี้เธอยังสามารถดูตัวอย่างขั้นตอนในลำดับขั้นการตรวจสอบโดยการเลือกลำดับขั้นได้ แม้ว่าเธอจะไม่สามารถดูข้อมูลหรือสถานะการเสร็จสมบูรณ์ของขั้นตอนได้ แต่เธอจะสามารถระบุการดำเนินการที่เป็นไปได้ที่เกิดขึ้นกับผู้ส่งคำขอดังกล่าวในระหว่างการตรวจสอบและลำดับขั้นการดำเนินการทางกฎหมาย  
  
 ในลำดับกระบวนการนี้ เจ้าหน้าที่สินเชื่อจะสามารถดูลำดับขั้นการตรวจสอบการฉ้อโกงและการดำเนินการตามกฎหมายซึ่งเป็นการเปิดเผยข้อมูลที่ไม่เหมาะสม เราขอแนะนำให้ใส่ใจกับข้อมูลที่อาจเปิดเผยเนื่องจากการแบ่งสาขาเป็นพิเศษ ในตัวอย่างของเรา ให้แบ่งกระบวนการออกเป็นสองกระบวนการ กระบวนการหนึ่งสำหรับการประมวลผลคำขอ และอีกกระบวนการหนึ่งสำหรับการตรวจสอบการฉ้อโกงเพื่อป้องกันการเปิดเผยข้อมูล กระบวนการสำหรับเจ้าหน้าที่สินเชื่อจะมีลักษณะเช่นนี้:  
  
 ![ผังงานที่แสดงขั้นตอนเพิ่มเติมในกระบวนการเพื่อป้องกันการเปิดเผยข้อมูล](media/example-car-sales-flow-chart-additional-steps-prevent-information-disclosure.png "ผังงานที่แสดงขั้นตอนเพิ่มเติมในกระบวนการเพื่อป้องกันการเปิดเผยข้อมูล")  
  
 กระบวนการสำหรับการตรวจสอบจะมีอยู่ในตัวเองและประกอบรวมขั้นตอนต่อไปนี้ด้วย:  
  
 ![ผังงานที่แสดงขั้นตอนสำหรับกระบวนการตรวจสอบสำหรับกรณีการเปิดเผยข้อมูล](media/example-car-sales-flow-chart-investigation-information-disclosure-case.png "ผังงานที่แสดงขั้นตอนสำหรับกระบวนการตรวจสอบสำหรับกรณีการเปิดเผยข้อมูล")  
  
 คุณจะต้องให้เวิร์กโฟลว์เพื่อซิงโครไนซ์การอนุมัติ/ปฏิเสธจากระเบียนการตรวจสอบไปยังระเบียนคำขอ  
  
### <a name="next-steps"></a>ขั้นตอนถัดไป  
 [สร้างลำดับกระบวนการทางธุรกิจ](create-business-process-flow.md)   
 [สร้างตรรกะทางธุรกิจแบบกำหนดเอง ด้วยกระบวนการต่าง ๆ](guide-staff-through-common-tasks-processes.md)   
 
